<!DOCTYPE html>
<html lang="en">

<head>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f4f4f4;
      line-height: 1.6;
    }

    .container {
      border: 1px solid;
      padding: 20px;
      background-color: #fff;
    }

    h1 {
      color: #333;
    }

    p {
      color: #555;
      background-color: #e0e0e0;
      padding: 20px;
    }

    img {
      max-width: 100%;
      height: auto;
      display: block;
      margin: 20px 0;
    }

    @media screen and (max-width: 768px) {
      .container {
        padding: 10px;
      }
    }

    /* New CSS for fade-in transition */
    .transition-fade {
      opacity: 0;
      transition: opacity 0.5s ease-in-out;
    }

    .fade-in {
      opacity: 1;
    }

    /* Dropdown menu styles */
    #dropdown {
      position: relative;
      display: inline-block;
      margin-right: 20px; /* Add some space between menu and content */
    }

    #dropdown a {
      color: #333;
      text-decoration: none;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      display: inline-block;
      transition: background-color 0.3s;
    }

    #dropdown a:hover {
      background-color: #f0f0f0;
    }

    #dropdown-content {
      display: none;
      position: absolute;
      top: 40px;
      left: 0;
      background-color: #fff;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      border: 1px solid #ccc;
      border-radius: 5px;
      overflow: hidden; /* Ensure rounded corners are applied */
      z-index: 1;
    }

    #dropdown-content a {
      color: #333;
      text-decoration: none;
      padding: 10px;
      display: block;
      transition: background-color 0.3s;
    }

    #dropdown-content a:hover {
      background-color: #f0f0f0;
    }

    #dropdown:hover #dropdown-content {
      display: block;
    }
  </style>
</head>

<body>
  <div id="dropdown">
    <a href="#">Hover me for Menu</a>
    <div id="dropdown-content">
      <a href="#">About</a>
      <a href="#">Data Resources</a>
      <a href="#">More Info</a>
    </div>
  </div>

  <div class="container transition-fade">
    <h1 class="transition-fade">My Question</h1>
    <p class="transition-fade">What year, within the period from 2006 to 2018, did Kenya witness the peak in the ratio
      of RSV detection cases to the mean number of RSV tests conducted in Kenya, and why is this finding significant
      in understanding the epidemiological landscape of RSV in the country during this time frame?</p>

    <h1 class="transition-fade">My Data</h1>
    <p> My data source was from dataverse.harvard.edu. It had some very reliable data that was associated with the
      Virus Epidemiology and Control (VEC) Dataverse. I considered this data to be reliable and comprehensive because
      it is Version 1.0 meaning that it is the most updated version of the dataset, there was definitely more than
      enough data to answer my question, and I was able to collect a citation for my data as well:
      <ol>
        <li>Rose, Erica Billig; Nyawanda,Bryan O.; Munywoki, Patrick K.; Murunga, Nickson; Bigogo, Godfrey M.;
          Otieno, Nancy A.; Onyango, Clayton; Chaves, Sandra S.; Verani, Jennifer R.; Emukule, Gideon O.;
          Widdowson, Marc-Alain; Nokes, D. James; Gerber, Susan I.; Langley, Gayle E., 2021,
          "Replication Data for: Respiratory Syncytial Virus Seasonality in Three Epidemiological Zones of Kenya.",
          <a href="https://doi.org/10.7910/DVN/3BC9JK">https://doi.org/10.7910/DVN/3BC9JK</a>, Harvard Dataverse,
          V1; agg_kili.tab [fileName], UNF:6:cBhpKMtb5odBSUsr3PSgvQ== [fileUNF]</li>
      </ol>
    </p>

    <h1 class="transition-fade">My Analysis</h1>
    <p>The bar plot tells me that there was a major increase in the number of detected cases of RSV and the number of
      RSV tests in 2007, and that as the years went on from 2006, the confirmed cases of RSV gradually dropped. This
      is an important factor when considering how prevalent RSV cases were in rural areas in Kenya around this time
      period. The intensity of RSV as observed by the data seems to level off from 2013 to 2018 though, indicating that
      the virus died down and the outbreak was minimal, which makes sense given that treatments and vaccines were
      eventually produced and distributed.

      The scatterplot tells me that the mean distribution of RSV_test cases is much higher from 2006-2012, but the mean
      distribution curves down from 2013-2018, which was a significant observation in analyzing the data. The data in
      the scatterplot as well as the 2D barplot displayed to the side is in correlation to the scatterplot of the
      RSV_detect which displays the major extrema in the RSV_detect value in the year 2007, showing that the graphs
      are accurately represented.
    </p>

    <h1 class="transition-fade">My Visualizations</h1>
    <img class="transition-fade" id="barPlotImage" src="Bar Plot.png" alt="Bar Plot">
    <img class="transition-fade" id="scatterplotImage" src="Scatterplot.png" alt="Scatterplot">

    <h1 class="transition-fade">My Answer</h1>
    <p>The year that there was a highest of RSV_test to RSV_detect was 2007, which was observed in our visualizations
      and is a major component of our analysis and understanding outbreaks of the virus during this time period. The
      scatterplot also confirms that the high levels of RSV detection occurred in the year 2007 compared to that of
      the other years, and that the second-highest RSV_test magnitude occurred in 2007. The 2D bar model also
      confirmed this answer as the bar that represented the mean RSV_detect value in that specific year (2007) and the
      point that represented the mean RSV_test value in 2007 confirmed that the maximum ratio was in that specific
      year. Disease prevalence and also burden context are major components in understanding outbreaks and
      epidemiology in rural areas of African countries, and while this data just so happened to be sourced from Kenya,
      assessing the detection cases and the test cases is crucial for identifying how many people got RSV and the
      resources allocated for testing for the RSV. Using the dataset from Harvard Dataverse, the question was answered
      using a 2D barplot and a scatterplot.</p>
  </div>

  <script src="https://d3js.org/d3.v7.min.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const elements = document.querySelectorAll(".transition-fade");

      function checkVisibility() {
        elements.forEach((element) => {
          const elementTop = element.getBoundingClientRect().top;
          const windowHeight = window.innerHeight;

          if (elementTop < windowHeight * 0.75) {
            element.classList.add("fade-in");
          }
        });
      }

      // Initial check on page load
      checkVisibility();

      // Check visibility as you scroll
      window.addEventListener("scroll", checkVisibility);

      // D3.js code for zoom/pan for bar plot image
      const barPlotImage = document.getElementById("barPlotImage");
      d3.select(barPlotImage)
        .call(d3.zoom()
          .scaleExtent([1, 8]) // Define the scale extent
          .on("zoom", function (event) {
            barPlotImage.style.transform = `scale(${event.transform.k}) translate(${event.transform.x}px, ${event.transform.y}px)`;
          })
        );

      // D3.js code for zoom/pan for scatterplot image
      const scatterplotImage = document.getElementById("scatterplotImage");
      d3.select(scatterplotImage)
        .call(d3.zoom()
          .scaleExtent([1, 8]) // Define the scale extent
          .on("zoom", function (event) {
            scatterplotImage.style.transform = `scale(${event.transform.k}) translate(${event.transform.x}px, ${event.transform.y}px)`;
          })
        );
    });
  </script>
</body>

</html>
